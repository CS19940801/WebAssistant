chrome.runtime.onMessage.addListener((e,t,a)=>{if(e&&e.type==="RUN_INTENT")return r(e).catch(()=>{}),a({ok:!0}),!0;if(e&&e.type==="OPEN_SIDEPANEL")return i().catch(()=>{}),a({ok:!0}),!0;if(e&&e.type==="SET_INTENT")return c(e).catch(()=>{}),a({ok:!0}),!0});async function r({tabId:e,intent:t,mode:a,inputs:n}){await chrome.tabs.sendMessage(e,{type:"RUN_FEATURE",intent:t,mode:a,inputs:n})}async function i(){const[e]=await chrome.windows.getAll({populate:!1});await chrome.sidePanel.setOptions({path:"sidepanel.html",enabled:!0}),await chrome.sidePanel.open({windowId:e.id})}async function c({intent:e}){await chrome.storage.local.set({assistantIntent:e});const[t]=await chrome.tabs.query({active:!0,currentWindow:!0});t&&await chrome.tabs.sendMessage(t.id,{type:"SHOW_INTENT",intent:e})}
